<template>
  <section>
    <li class="icon-container first-li" @mouseover="show=true" @mouseleave="show=false">
      <span class="search-input">
        <transition enter-active-class="animated fadeIn" leave-active-class="animated fadeOut">
          <input v-if="show" v-model="searchQuery" type="text" size="20" height="48">
        </transition>
        <i class="flaticon-search" i />
      </span>
      <nuxt-link
        v-for="nav in resultQuery"
        :key="nav.id"
        to="/"
        tag="li"
        class="navli"
      >
        <a :href="nav.content" target="_blank">{{ nav.header }}</a>
      </nuxt-link>
    </li>
  </section>
</template>
<script>
export default {
  data () {
    return {
      show: false,
      searchQuery: null
    }
  },
  computed: {
    resultQuery () {
      if (this.searchQuery) {
        return this.$store.getters.getSlideSets.filter((item) => {
          return this.searchQuery.toLowerCase().split(' ').every(v => item.header.toLowerCase().includes(v))
        })
      } else {
        return this.resources
      }
    }
  }
}
</script>
<style lang="less" scoped>

.icon-container {
  padding: 0.5rem 0.5rem;
  display: inline-block;
  background-color: transparent;
  vertical-align: middle;

  .search-input{
  padding: 0.9rem 0.5rem 0.9rem 1rem;
  border-radius: 3em;
  transition: 1.3s;
  }

  [class^="flaticon-search"]:hover:before {
    color: lightgreen;
  }

  input {
    color: white;
    border: none;
    background: transparent;
    vertical-align: middle;
    z-index: 1000;
  }
}

.search-input:hover {
  background-color: rgba(144, 238, 144, 0.3);
}

.first-li{
  position: relative;
  left: 0.6rem;
}
</style>
